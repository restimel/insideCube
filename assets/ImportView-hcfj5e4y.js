import{d as B,j as i,s as A,y as L,c as y,g as E,p as J,t as m,o as g,_ as U,u as O,f as V,x as q,b as h,w as k,m as c,B as C,a,C as w,e as S,D as z,F as G,h as H,n as K}from"./index-MDkuAf7_.js";import{u as P,B as D}from"./panelSection-SV_cDNNf.js";const Q=B({__name:"MessageDisplay",props:{message:{},type:{},duration:{}},emits:["dismissed"],setup(M,{emit:s}){const f=M,p=s,n=i(!0),r=i(0),d=()=>{n.value=!1,clearTimeout(r.value),p("dismissed")};function b(){clearTimeout(r.value)}function x(){n.value&&(b(),r.value=setTimeout(d,f.duration||5e3))}return A(()=>f.message,u=>{u&&(n.value=!0,x())},{immediate:!0}),L(()=>{b()}),(u,v)=>n.value?(g(),y("span",{key:0,class:J(["message",u.type]),onClick:d,onMouseover:b,onMouseleave:x},m(u.message),35)):E("",!0)}}),I=U(Q,[["__scopeId","data-v-61752c54"]]),R={class:"import-export-container"},W=["placeholder"],X={class:"checkbox-option"},Y={class:"selection-header"},Z={key:0,class:"cube-list"},ee={class:"cube-checkbox"},se=["checked","onInput"],te={class:"cube-label"},ae={key:1,class:"no-cubes"},oe={key:2,class:"selected-cubes-info"},le=["placeholder"],ue=B({__name:"ImportView",setup(M){const{t:s}=O(),f=P(),p=V(()=>f.cubes),n=i(""),r=i(""),d=i("success"),b=i(!0),x=()=>{try{if(!n.value.trim()){r.value=s("messages.enterJsonData"),d.value="error";return}const e=f.import(n.value,b.value);e.type==="success"?(r.value=s(e.message,e.details),d.value=e.type,n.value=""):(r.value=s(e.message,{details:e.details}),d.value=e.type)}catch(e){const t=(e==null?void 0:e.message)??"";r.value=s("messages.importError",{error:t}),d.value="error"}},u=i(""),v=i(""),_=i("success"),l=i(new Set),T=V({get:()=>Array.from(p.value.keys()).every(e=>l.value.has(e)),set:e=>{if(e)for(const t of p.value.keys())l.value.add(t);else l.value.clear()}});A(l,()=>{j()},{deep:!0}),q(()=>{for(const[e]of p.value)l.value.has(e)||l.value.add(e)});const $=e=>{l.value.has(e)?l.value.delete(e):l.value.add(e)},j=()=>{const e=Array.from(l.value);if(e.length===0){u.value="",v.value=s("messages.selectAtLeastOneCube"),_.value="warning";return}u.value=f.export(e),v.value=""},F=()=>{if(!u.value){v.value=s("messages.nothingToCopy"),_.value="error";return}navigator.clipboard.writeText(u.value).then(()=>{v.value=s("messages.copiedToClipboard"),_.value="success"}).catch(()=>{v.value=s("messages.copyError"),_.value="error"})};return(e,t)=>(g(),y("div",R,[h(D,{title:c(s)("cube.import")},{footer:k(()=>[a("button",{onClick:x,class:"action-button primary-button"},m(c(s)("actions.import")),1),h(I,{message:r.value,type:d.value,onDismissed:t[2]||(t[2]=o=>r.value="")},null,8,["message","type"])]),default:k(()=>[C(a("textarea",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),placeholder:c(s)("cube.pasteJSON"),class:"json-textarea"},null,8,W),[[w,n.value]]),a("div",X,[a("label",null,[C(a("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=o=>b.value=o)},null,512),[[z,b.value]]),S(" "+m(c(s)("cube.edition.replace")),1)])])]),_:1},8,["title"]),h(D,{title:c(s)("cube.export")},{footer:k(()=>[a("button",{onClick:F,class:"action-button primary-button"},m(c(s)("actions.copy")),1),h(I,{message:v.value,type:_.value,onDismissed:t[5]||(t[5]=o=>v.value="")},null,8,["message","type"])]),default:k(()=>[a("div",{class:J(["cube-selection",{disabled:p.value.size===0}])},[a("div",Y,[a("label",null,[C(a("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=o=>T.value=o)},null,512),[[z,T.value]]),S(" "+m(c(s)("actions.selectAll")),1)])]),p.value.size>0?(g(),y("div",Z,[(g(!0),y(G,null,H(p.value,([o,N])=>(g(),y("div",{key:o,class:"cube-item"},[a("label",ee,[a("input",{type:"checkbox",checked:l.value.has(o),onInput:re=>$(o)},null,40,se),a("span",te,m(o),1),a("span",{class:"cube-color-dot",style:K(`--cube-color: ${N.color}`)},null,4)])]))),128))])):(g(),y("div",ae,m(c(s)("cube.noCubes")),1)),l.value.size?(g(),y("aside",oe,m(c(s)("cube.cubes",{count:l.value.size})),1)):E("",!0)],2),C(a("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>u.value=o),readonly:"",placeholder:c(s)("cube.exportJson"),class:"json-textarea"},null,8,le),[[w,u.value]])]),_:1},8,["title"])]))}}),pe=U(ue,[["__scopeId","data-v-58a70c03"]]);export{pe as default};
